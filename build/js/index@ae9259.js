!function(e){function t(e){delete installedChunks[e]}function n(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=h.p+""+e+"."+b+".hot-update.js",t.appendChild(n)}function i(e){return e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var i=new XMLHttpRequest,r=h.p+""+b+".hot-update.json";i.open("GET",r,!0),i.timeout=e,i.send(null)}catch(e){return n(e)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)n(new Error("Manifest request to "+r+" timed out."));else if(404===i.status)t();else if(200!==i.status&&304!==i.status)n(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(i.responseText)}catch(e){return void n(e)}t(e)}}})}function r(e){var t=R[e];if(!t)return h;var n=function(n){return t.hot.active?(R[n]?R[n].parents.indexOf(e)<0&&R[n].parents.push(e):(S=[e],y=n),t.children.indexOf(n)<0&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),S=[]),h(n)};for(var i in h)Object.prototype.hasOwnProperty.call(h,i)&&"e"!==i&&Object.defineProperty(n,i,function(e){return{configurable:!0,enumerable:!0,get:function(){return h[e]},set:function(t){h[e]=t}}}(i));return n.e=function(e){function t(){B--,"prepare"===O&&(A[e]||s(e),0===B&&0===P&&c())}return"ready"===O&&a("prepare"),B++,h.e(e).then(t,function(e){throw t(),e})},n}function o(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:y!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._acceptedDependencies[e[i]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:d,apply:f,status:function(e){if(!e)return O;k.push(e)},addStatusHandler:function(e){k.push(e)},removeStatusHandler:function(e){var t=k.indexOf(e);t>=0&&k.splice(t,1)},data:_[e]};return y=void 0,t}function a(e){O=e;for(var t=0;t<k.length;t++)k[t].call(null,e)}function u(e){return+e+""===e?+e:e}function d(e){if("idle"!==O)throw new Error("check() is only allowed in idle status");return w=e,a("check"),i(x).then(function(e){if(!e)return a("idle"),null;D={},A={},E=e.c,g=e.h,a("prepare");var t=new Promise(function(e,t){v={resolve:e,reject:t}});m={};return s(0),"prepare"===O&&0===B&&0===P&&c(),t})}function l(e,t){if(E[e]&&D[e]){D[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--P&&0===B&&c()}}function s(e){E[e]?(D[e]=!0,P++,n(e)):A[e]=!0}function c(){a("ready");var e=v;if(v=null,e)if(w)Promise.resolve().then(function(){return f(w)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(u(n));e.resolve(t)}}function f(n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}}if("ready"!==O)throw new Error("apply() is only allowed in ready status");n=n||{};var r,o,d,l,s,c={},f=[],p={},y=function(){console.warn("[HMR] unexpected require("+w.moduleId+") to disposed module")};for(var v in m)if(Object.prototype.hasOwnProperty.call(m,v)){s=u(v);var w;w=m[v]?function(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),a=o.id,u=o.chain;if((l=R[a])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:u,moduleId:a};if(l.hot._main)return{type:"unaccepted",chain:u,moduleId:a};for(var d=0;d<l.parents.length;d++){var s=l.parents[d],c=R[s];if(c){if(c.hot._declinedDependencies[a])return{type:"declined",chain:u.concat([s]),moduleId:a,parentId:s};t.indexOf(s)>=0||(c.hot._acceptedDependencies[a]?(n[s]||(n[s]=[]),i(n[s],[a])):(delete n[s],t.push(s),r.push({chain:u.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}(s):{type:"disposed",moduleId:v};var x=!1,M=!1,k=!1,P="";switch(w.chain&&(P="\nUpdate propagation: "+w.chain.join(" -> ")),w.type){case"self-declined":n.onDeclined&&n.onDeclined(w),n.ignoreDeclined||(x=new Error("Aborted because of self decline: "+w.moduleId+P));break;case"declined":n.onDeclined&&n.onDeclined(w),n.ignoreDeclined||(x=new Error("Aborted because of declined dependency: "+w.moduleId+" in "+w.parentId+P));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(w),n.ignoreUnaccepted||(x=new Error("Aborted because "+s+" is not accepted"+P));break;case"accepted":n.onAccepted&&n.onAccepted(w),M=!0;break;case"disposed":n.onDisposed&&n.onDisposed(w),k=!0;break;default:throw new Error("Unexception type "+w.type)}if(x)return a("abort"),Promise.reject(x);if(M){p[s]=m[s],i(f,w.outdatedModules);for(s in w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,s)&&(c[s]||(c[s]=[]),i(c[s],w.outdatedDependencies[s]))}k&&(i(f,[w.moduleId]),p[s]=y)}var B=[];for(o=0;o<f.length;o++)s=f[o],R[s]&&R[s].hot._selfAccepted&&B.push({module:s,errorHandler:R[s].hot._selfAccepted});a("dispose"),Object.keys(E).forEach(function(e){!1===E[e]&&t(e)});for(var A,D=f.slice();D.length>0;)if(s=D.pop(),l=R[s]){var C={},j=l.hot._disposeHandlers;for(d=0;d<j.length;d++)(r=j[d])(C);for(_[s]=C,l.hot.active=!1,delete R[s],delete c[s],d=0;d<l.children.length;d++){var I=R[l.children[d]];I&&((A=I.parents.indexOf(s))>=0&&I.parents.splice(A,1))}}var G,L;for(s in c)if(Object.prototype.hasOwnProperty.call(c,s)&&(l=R[s]))for(L=c[s],d=0;d<L.length;d++)G=L[d],(A=l.children.indexOf(G))>=0&&l.children.splice(A,1);a("apply"),b=g;for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(e[s]=p[s]);var F=null;for(s in c)if(Object.prototype.hasOwnProperty.call(c,s)&&(l=R[s])){L=c[s];var Y=[];for(o=0;o<L.length;o++)if(G=L[o],r=l.hot._acceptedDependencies[G]){if(Y.indexOf(r)>=0)continue;Y.push(r)}for(o=0;o<Y.length;o++){r=Y[o];try{r(L)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:s,dependencyId:L[o],error:e}),n.ignoreErrored||F||(F=e)}}}for(o=0;o<B.length;o++){var H=B[o];s=H.module,S=[s];try{h(s)}catch(e){if("function"==typeof H.errorHandler)try{H.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:t,orginalError:e,originalError:e}),n.ignoreErrored||F||(F=t),F||(F=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:s,error:e}),n.ignoreErrored||F||(F=e)}}return F?(a("fail"),Promise.reject(F)):(a("idle"),new Promise(function(e){e(f)}))}function h(t){if(R[t])return R[t].exports;var n=R[t]={i:t,l:!1,exports:{},hot:o(t),parents:(M=S,S=[],M),children:[]};return e[t].call(n.exports,n,n.exports,r(t)),n.l=!0,n.exports}var p=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){l(e,t),p&&p(e,t)};var y,v,m,g,w=!0,b="ae9259e19b79c5523db4",x=1e4,_={},S=[],M=[],k=[],O="idle",P=0,B=0,A={},D={},E={},R={};h.m=e,h.c=R,h.d=function(e,t,n){h.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},h.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(t,"a",t),t},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h.p="./",h.h=function(){return b},r(13)(h.s=13)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=i(r),a=n(2),u=i(a),d=n(6),l=i(d),s=n(17),c=i(s),f=n(19),h=i(f),p=n(11),y=i(p),v=n(30),m=i(v),g=n(34),w=i(g),b=n(3),x=i(b),_=n(7),S=i(_),M=n(5),k=i(M),O={container:u.default.search("#container"),width:1e3,height:600,centerX:500,centerY:300,user:null,enemyList:[],friendList:[],tree:null,nowK:1,nowItem:0,time:-1,nextTime:0,kInfo:[!1,!1,!1],init:function(e){(0,S.default)()>l.default.init>c.default.init>y.default.init>function(t){c.default.change("menu"),this.bindEvent(),this.bindMusic(),this.user=new h.default(500,300,0),this.tree=new QuadTree({x:0,y:0,width:1e3,height:600},0,10,6),t(),e&&e()}.bind(this)||S.default.go()},bindEvent:function(){var e=this;u.default.on("#btn-start","click",function(){c.default.change("main")}),u.default.on("#btn-help","click",function(){c.default.change("help")}),u.default.on("#back-menu1","click",function(){c.default.change("menu")}),u.default.on("#back-menu2","click",function(){c.default.change("menu")}),u.default.on("#k-select","click",function(t){var n=t.target;"span"===n.tagName.toLowerCase()&&(e.setK(+n.innerHTML),e.GameStart())}),y.default.onDirChange=this.onDirChange},bindMusic:function(){Array.from(u.default.searchAll(".menu li")).forEach(function(e){u.default.on(e,"click",function(){l.default.play("click")})})},onDirChange:function(e,t){var n=this.user;if(0!==e)return n.speed=n.reSpeed,n.setAngle(t),this;n.speed=0},start:o.default.lock(function(e){return function(){O.bgmOk=new Promise(function(e){return l.default.changeBGM("bat",e)}),(0,S.default)()>c.default.hide.args("menu")>function(t){e()||t()}>O.GameStart||S.default.go()}}),setK:function(e){this.nowK=e,this.time=-1,this.nextTime=0,this.nowItem=0},nextK:function(){new S.default(k.default.args("Interlude",500,300,"Round "+(this.nowK+1)),k.default.args("Interlude2Comb",500,300),function(){this.setK(this.nowK+1)}.bind(this)).go()},GameStart:function(){function e(){this.createEnemy(),n.clear();for(var i=this.enemyList,r=i.length-1;r>=0;r--){var a=i[r];a.isDestroy?i.splice(r,1):(a.nextState(),n.insert(a))}t.nextState();for(var u=o.default.unique(n.retrieve(t)),d=u.length-1;d>=0;d--)if(x.default.isCollision(t,u[d]))return this.userDeath();for(var l=this.friendList,s=l.length-1;s>=0;s--){var c=l[s];if(c.isDestroy)l.splice(s,1);else{c.nextState();for(var f=o.default.unique(n.retrieve(c)),h=f.length-1;h>=0;h--)x.default.isCollision(c,f[h])&&x.default.collision(c,f[h])}}requestAnimationFrame(e)}var t=this.user,n=this.tree;this.enemyList=[],this.friendList=[],e=e.bind(this),l.default.changeBGM("bat"),(0,S.default)()>c.default.hide.args(void 0)>function(e){console.log(l.default.bgmOk),l.default.bgmOk&&e.skip(1),e()}>function(e){c.default.loading.querySelector(".box").innerHTML="加载音乐",(0,S.default)()>c.default.show.args("loading")>function(e){l.default.bgmPro.then(e)}>c.default.hide.args(void 0)>e||S.default.go()}>function(n){l.default.playBGM(),y.default.enableDirectionKey(),t.x=O.centerX,t.y=O.centerY,t.init().birth(function(){e(),n()})}||S.default.go()},createEnemy:function(){var e=this;if(++this.time===this.nextTime){var t=w.default["k"+this.nowK][this.nowItem];if(!t)return this.nextK();var n=t.enemy,i=t.after,r=t.enemy===t.enemy+"",a=void 0;if(r&&""!=n){var u=t.x||o.default.random(0,980),d=t.y||o.default.random(0,580);"u"===u&&(u=this.user.getCenter().x),"u"===d&&(d=this.user.getCenter().y),a=(0,m.default)(n,u,d).init().birth(function(){O.addEnemy(a)})}else"function"==typeof n&&(a=n(m.default,O.addEnemy));i===+i?(this.time=0,this.nextTime=i,this.nowItem++,0==i&&(this.time=-1,O.createEnemy())):i(a,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.time=-1,e.nextTime=t,e.nowItem++})}},addEnemy:function(e){this.enemyList.push(e)},userDeath:function(){var e=this;this.user.destroy(),y.default.disableDirectionKey();var t=new S.default;o.default.wait(1100,function(){Array().concat(e.enemyList,e.friendList).forEach(function(e){e.isDestroy||t.add(function(t){o.default.wait(60,t),e.destroy()})}),t.add(o.default.wait.args(1500),c.default.show.args("menu"),l.default.changeBGM.args("main"),l.default.playBGM),t.go()})}};t.default=o.default.allBind(O)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={allBind:function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=e[t].bind(e));return e},wait:function(e,t){setTimeout(function(){t&&t()},e)},lock:function(e){var t=!1,n=function(){t=!1},i=e(n);return function(){t||(t=!0,i.apply(null,Array.prototype.slice.call(arguments)))}},unique:function(e){for(var t=[],n=0,i=e.length;n<i;n++){for(var r=n+1;r<i;r++)e[n]===e[r]&&(r=++n);t.push(e[n])}return t},tmp2:180/Math.PI,random:function(e,t){return Math.random()*(t-e+1)+e>>0},randomAngle:function(){return 360*Math.random()>>0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={create:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},formatSpace:function(e){return e.replace(/^ +| +$| (?= )/g,"")},addClass:function(e,t){return e.className=i.formatSpace(e.className+" "+t)},removeClass:function(e,t){return e.className=i.formatSpace(e.className.replace(new RegExp(t,"g"),""))},animationEnd:function(e,t){function n(){t(),i&&(e.removeEventListener("webkitAnimationEnd",n),e.removeEventListener("animationend",n))}var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.addEventListener("webkitAnimationEnd",n),e.addEventListener("animationend",n)},hide:function(e){return e.style.display="none",e},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";return e.style.display=t,e},search:function(e){return document.querySelector(e)},searchAll:function(e){return document.querySelectorAll(e)},on:function(e,t,n){e===""+e&&(e=i.search(e)),e.addEventListener(t,n)}};t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(20);var r=n(0),o=i(r),a=n(6),u=i(a),d=n(1),l=i(d),s=n(7),c=i(s),f=n(2),h=i(f),p=n(5),y=i(p),v=Math.PI/180;t.default=Base.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.random(0,980),t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.random(0,580),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.randomAngle();this.x=e,this.y=n;var r=[];this.skills.forEach(function(e){return r.push(new e(t))}),this.skills=r,this.setAngle(i)},dom:null,cls:"",beforeAni:"",birthMusic:null,birthAni:"",deathAni:null,onDeath:null,skills:[],hp:10,x:500,y:300,radian:0,speed:2,vx:0,vy:0,length:10,isDestroy:!1,afterMovePlugin:[],afterUpdatePlugin:[],width:10,height:10,init:function(){this.isDestroy=!1;var e=this.length>>1;return this.dom=h.default.create("div","block"+this.length+" "+this.cls),this.x-=e,this.y-=e,this.update(),this},birth:function(e){var t=this.getCenter(),n=t.x,i=t.y;return(0,c.default)()>function(e){this.beforeAni||e.skip(1),e()}.bind(this)>y.default.args(this.beforeAni,n,i)>function(t){this.birthAni&&(0,y.default)(this.birthAni,n,i),this.birthMusic&&u.default.play(this.birthMusic),o.default.container.appendChild(this.dom),setTimeout(function(){e&&e(),t()},0)}.bind(this)||c.default.go(),this},show:function(){return h.default.show(this.dom),this},hide:function(){return h.default.hide(this.dom),this},nextState:function(){return this.move(),this.afterMove(),this.thenSkills(),this.update()},move:function(){this.x+=this.vx,this.y+=this.vy},afterMove:function(){var e=this;this.afterMovePlugin.forEach(function(t){return t.call(e)})},thenSkills:function(){this.skills.forEach(function(e){return e.step()})},update:function(){var e=this;return this.dom.style.cssText="left: "+this.x+"px; top: "+this.y+"px;",this.afterUpdatePlugin.forEach(function(t){return t.call(e)}),this},destroy:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getCenter();return this.deathAni&&e&&(0,y.default)(this.deathAni,t.x,t.y),o.default.container.removeChild(this.dom),this.isDestroy=!0,this.dom=null,this.onDeath&&this.onDeath(),this},setAngle:function(e){this.angle=e,this.radian=e*v,this.decomposeSpeed()},setRadian:function(e){this.radian=e,this.decomposeSpeed()},decomposeSpeed:function(){this.vx=Math.cos(this.radian)*this.speed,this.vy=Math.sin(this.radian)*this.speed},getCenter:function(){var e=this.length>>1;return{x:this.x+e,y:this.y+e}}},{isCollision:function(e,t){var n=e.length,i=t.length,r=e.x,o=e.y,a=t.x,u=t.y;return!(o>i+u||n+r<a||n+o<u||r>i+a)},collision:function(e,t){if(!e.isDestroy&&!t.isDestroy){var n=e.hp;e.hp-=t.hp,t.hp-=n,e.hp<=0&&e.destroy(),t.hp<=0&&t.destroy()}}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(22);var r=n(0),o=i(r),a=n(2),u=i(a),d=n(6),l=i(d),s=Base.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.default.centerX,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.centerY,i=arguments[2];this.dom=u.default.create("div","ani "+this.cls),this.x=e-this.width/2,this.y=n-this.height/2,this.dom.style.cssText="left: "+this.x+"px; top: "+this.y+"px;",u.default.animationEnd(this.dom,function(){o.default.container.removeChild(t.dom),t.dom=null,i&&i()}),o.default.container.appendChild(this.dom),this.music&&l.default.play(this.music)},dom:null,cls:"",music:"",x:null,y:null,width:10,height:10});t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];switch(e){case"SpreadRed":return new(Function.prototype.bind.apply(o.default.SpreadRed,[null].concat(n)));case"SpreadGreen":return new(Function.prototype.bind.apply(o.default.SpreadGreen,[null].concat(n)));case"SpreadBlue":return new(Function.prototype.bind.apply(o.default.SpreadBlue,[null].concat(n)));case"ShrinkRed":return new(Function.prototype.bind.apply(u.default.ShrinkRed,[null].concat(n)));case"ShrinkBlue":return new(Function.prototype.bind.apply(u.default.ShrinkBlue,[null].concat(n)));case"ShrinkYellow":return new(Function.prototype.bind.apply(u.default.ShrinkYellow,[null].concat(n)));case"ShrinkGreen":return new(Function.prototype.bind.apply(u.default.ShrinkGreen,[null].concat(n)));case"ShrinkSpeed":return new(Function.prototype.bind.apply(u.default.ShrinkSpeed,[null].concat(n)));case"BoomRed":return new(Function.prototype.bind.apply(l.default.BoomRed,[null].concat(n)));case"BoomBlue":return new(Function.prototype.bind.apply(l.default.BoomBlue,[null].concat(n)));case"BoomYellow":return new(Function.prototype.bind.apply(l.default.BoomYellow,[null].concat(n)));case"BoomGreen":return new(Function.prototype.bind.apply(l.default.BoomGreen,[null].concat(n)));case"BoomSpeed":return new(Function.prototype.bind.apply(l.default.BoomSpeed,[null].concat(n)));case"ShadowRed":return new(Function.prototype.bind.apply(c.default.ShadowRed,[null].concat(n)));case"ShadowSpeed":return new(Function.prototype.bind.apply(c.default.ShadowSpeed,[null].concat(n)));case"ShadowYellow":return new(Function.prototype.bind.apply(c.default.ShadowYellow,[null].concat(n)));case"Interlude":return new(Function.prototype.bind.apply(h.default.Interlude,[null].concat(n)));case"Interlude2":return new(Function.prototype.bind.apply(h.default.Interlude2,[null].concat(n)));case"Interlude2Comb":return new(Function.prototype.bind.apply(h.default.Interlude2Comb,[null].concat(n)));case"UserBirth":return new(Function.prototype.bind.apply(y.default.UserBirth,[null].concat(n)));case"SparkExplosion":return new(Function.prototype.bind.apply(y.default.SparkExplosion,[null].concat(n)))}};var r=n(21),o=i(r),a=n(23),u=i(a),d=n(24),l=i(d),s=n(25),c=i(s),f=n(26),h=i(f),p=n(27),y=i(p)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=i(r),a=n(2),u=(i(a),n(1)),d=i(u),l=function(e){return"/assets/ogg/"+e+".ogg"},s={BGM:new Audio,bgmPro:null,bgmOk:!1,init:function(e){document.querySelector(".loading .box").innerHTML="加载音乐",this.BGM.loop=!0,this.initLoadMusic(e)},initLoadMusic:function(e){var t=this,n=[];for(var i in o.default)"bgList"!==i&&n.push(function(e,n){return new Promise(function(i){var r=new Audio;r.oncanplay=i,r.onabort=i,r.volume=.6,r.src=n,t[e]=r})}(i,l(i)));n.push(new Promise(function(e){return t.changeBGM(o.default.bgList.main,e)})),Promise.all(n).then(function(){e&&e()})},play:function(e){this[e].currentTime=0,this[e].play()},pause:function(e,t){var n=this,i=50,r=setInterval(function(){--i?n[e].volume=.02*i:(clearInterval(r),n[e].pause(),n[e].volume=1,t&&t())},16)},changeBGM:function(e,t){var n=this;this.bgmOk=!1,this.bgmPro=new Promise(function(e){n.BGM.oncanplay=function(){n.bgmOk=!0,e(),t&&t(),s.BGM.oncanplay=null}}),this.BGM.src=l("bgm_"+e)},playBGM:function(){this.play("BGM")},pauseBGM:function(e){this.pause("BGM",e)}};d.default.allBind(s),t.default=s},function(e,t,n){"use strict";var i,r,o;"function"==typeof Symbol&&Symbol.iterator;/*!
 * func-chain -https://github.com/panruiplay/func-chain#readme
 * Version - 1.0.3
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2017 play
 */
!function(n,a){r=[],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(0,function(){function e(e,t){for(var n in t)e[n]=t[n]}function t(e,t){this.fn=e,this.args=t}function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this instanceof n)this.functions=[],this.args=[],this.add.apply(this,t);else{if(arguments.length)throw new Error("请加上 new 关键字，如果你想使用表达式语法请不要传入参数");r=!0,o=new n}}var i=Function.prototype,r=!1,o=null;i.bind||(i.bind=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this;return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];r.apply(e,n.concat(i))}}),t.prototype.valueOf=function(){return!r||(r=!1,o.functions.push(this.fn),o.args.push(this.args),r=!0,!1)};var a=i.valueOf;return e(i,{args:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return new t(this,n)},valueOf:function(){return r?(r=!1,o.functions.push(this),o.args.push(void 0),r=!0,!1):a.call(this)}}),e(n.prototype,{add:function(){for(var e=0;e<arguments.length;e++){var n=arguments[e],i=void 0;if(n.constructor===t)i=n.args,n=n.fn;else if("function"!=typeof n)throw new Error("你传入的参数不是一个函数");this.functions.push(n),this.args.push(i)}return this},go:function(){function t(){var e=++t.currentIndex,n=t.currentChain,i=void 0;if(!(e>=n.args.length||"running"!==t.state)){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];void 0===(i=n.args[e])&&(i=o),n.functions[e].apply(n,i.concat(t))}}return e(t,{state:"running",currentChain:this,currentIndex:-1,switchTo:function(e,t){if("function"==typeof e)this.currentIndex=-1,this.currentChain=new n(e);else{if(e.constructor!==n)throw new Error("不能切换到一个非函数链对象上");this.currentIndex=void 0===t?-1:--t,this.currentChain=e}}.bind(t),skip:function(e){this.currentIndex+=e}.bind(t),stop:function(){this.state="interrupted",this()}.bind(t)}),t.apply(null,arguments),this}}),n.end=function(){return r=0,o},n.go=function(){r=!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.go.apply(o,t)},n})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=Base.extend({constructor:function(e){this.holder=e},holder:null,fn:null,nowStep:0,cd:10,running:!1,step:function(){var e=this;if(this.nowStep++===this.cd){var t=function(){return e.nowStep=0};this.fn(t)}return this},reset:function(){return this.nowStep=0,this},setCD:function(e){return this.cd=e,this.reset()}})},function(e,t,n){"use strict";function i(){(this.x>u.default.width||this.x+this.length<0||this.y>u.default.height||this.y+this.length<0)&&this.destroy(!1)}function r(){var e=this.length;this.x+e>u.default.width?this.x=u.default.width-e:this.x<0&&(this.x=0),this.y+e>u.default.height?this.y=u.default.height-e:this.y<0&&(this.y=0)}function o(){var e=this.length;this.x+e>u.default.width?(this.x=u.default.width-e,this.vx=-this.vx):this.x<0&&(this.x=0,this.vx=-this.vx),this.y+e>u.default.height?(this.y=u.default.height-e,this.vy=-this.vy):this.y<0&&(this.y=0,this.vy=-this.vy)}Object.defineProperty(t,"__esModule",{value:!0}),t.Boundary2=i,t.Boundary1=r,t.Boundary3=o;var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this.holder.getCenter();(0,d.default)(this.ani,t.x,t.y),e()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),a=i(o),u=n(5),d=i(u);t.default=a.default.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ShadowRed",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments[3];this.base(i),this.fn=r,this.ani=e,this.cd=t,this.nowStep=n},nowStep:10,cd:10})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){f=h=p=0,c.onDirChange&&c.onDirChange(f,void 0)}function o(e){1==e?(0==p&&f++,p=1):2==e?(0==h&&f++,h=1):3==e?(0==p&&f++,p=-1):(0==h&&f++,h=-1),c.onDirChange&&c.onDirChange(f,y["v"+h+p])}function a(e){1==e&&1==p||3==e&&-1==p?(p=0,f--):(2==e&&1==h||4==e&&-1==h)&&(h=0,f--),c.onDirChange&&c.onDirChange(f,y["v"+h+p])}Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),d=i(u),l=n(1),s=i(l),c={},f=0,h=0,p=0,y={v00:0,v10:0,"v1-1":45,"v0-1":90,"v-1-1":135,"v-10":180,v11:-45,v01:-90,"v-11":-135},v=void 0,m=void 0;c={init:function(e){window.onresize=function(){var e=d.default.container.getBoundingClientRect(),t=e.left,n=e.top;v=t+5,m=n+5},window.onresize(),document.onkeydown=c.down_interface.bind(c),document.onkeyup=c.up_interface.bind(c),document.onmousemove=c.mouse_interface.bind(c),this.disableDirectionKey(),e()},disableMap:{},disableMouse:!1,down_interface:function(e){var t="k"+e.keyCode;this.disableMap[t]||this[t]&&this[t]()},up_interface:function(e){var t="c"+e.keyCode;this.disableMap[t]||this[t]&&this[t]()},mouse_interface:function(e){this.disableMouse||(this.mouseX=e.pageX-v,this.mouseY=e.pageY-m)},directionReset:r,onDirChange:function(){},disableDirectionKey:function(){var e=this;["k87","c87","k65","c65","k68","c68","k83","c83"].forEach(function(t){return e.disableMap[t]=1}),this.directionReset()},enableDirectionKey:function(){var e=this;["k87","c87","k65","c65","k68","c68","k83","c83"].forEach(function(t){return e.disableMap[t]=0}),this.directionReset()},k87:function(){o(1)},k65:function(){o(4)},k68:function(){o(2)},k83:function(){o(3)},c87:function(){a(1)},c65:function(){a(4)},c68:function(){a(2)},c83:function(){a(3)}},t.default=s.default.allBind(c)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=d.default.user.getCenter(),n=this.holder.getCenter();this.holder.setRadian(Math.atan2(t.y-n.y,t.x-n.x)),e()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),a=i(o),u=n(0),d=i(u);t.default=a.default.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1];this.base(t),this.fn=r,this.cd=e,this.nowStep=e},nowStep:10,cd:10})},function(e,t,n){"use strict";n(14),n(15);var i=n(0);(function(e){return e&&e.__esModule?e:{default:e}})(i).default.init()},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={click:"click",del1:"del1",del2:"del2",fire1:"fire1",bgList:{main:"main",bat:"bat",shop:"shop"}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(18);var r=n(1),o=i(r),a=n(2),u=i(a),d=n(7),l=i(d),s={nowPanel:"loading",changing:!1,init:function(e){var t=this;console.log("panel"),Array.from(document.querySelectorAll(".panel")).forEach(function(e){var n=e.className.replace(/(panel)| /g,"");t[n]=e}),e()},hide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nowPanel,n=arguments[1];this.changing||(this.changing=!0,t=this[t],u.default.animationEnd(t,function(){u.default.hide(t),u.default.removeClass(t,"animated fadeOut"),e.changing=!1,n&&n()}),u.default.addClass(t,"animated fadeOut"))},show:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nowPanel,n=arguments[1];this.changing||(this.changing=!0,this.nowPanel=t,t=this[t],u.default.addClass(t,"animated fadeIn"),u.default.show(t,"flex"),u.default.animationEnd(t,function(){e.changing=!1,u.default.removeClass(t,"animated fadeIn"),n&&n()}))},change:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.nowPanel,t=arguments[1];(0,l.default)()>this.hide.args(this.nowPanel)>this.show.args(e)>function(){t&&t()}||l.default.go()}};t.default=o.default.allBind(s)},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(2),u=i(a),d=n(11),l=i(d),s=n(0),c=i(s),f=n(28),h=i(f),p=n(9),y=Math.atan2,v=180/Math.PI,m=function(e,t,n,i){return y(i-t,n-e)*v};t.default=o.default.extend({cls:"user",beforeAni:"UserBirth",birthAni:"SpreadGreen",deathAni:"BoomGreen",hp:10,speed:0,reSpeed:2,length:10,skills:[h.default],sightDom:null,sightCls:"s1",sightAngle:0,afterMovePlugin:[p.Boundary1],init:function(){return this.sightDom=u.default.create("div",this.sightCls),this.setSightAngle(),this.base()},nextState:function(){return this.setSightAngle(),this.speed||(this.vx=this.vy=0),this.base()},update:function(){var e=this.getCenter();return this.sightDom.style.cssText="left: "+e.x+"px; top: "+e.y+"px; transform: rotate("+this.sightAngle+"deg)",this.base()},birth:function(e){var t=this;return this.base(function(){c.default.container.appendChild(t.sightDom),e&&e()}),this},destroy:function(){return c.default.container.removeChild(this.sightDom),this.sightDom=null,this.base()},setSightAngle:function(){var e=this.getCenter();this.sightAngle=m(e.x,e.y,l.default.mouseX,l.default.mouseY)}})},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r.default.extend({cls:"spread-red",width:10,height:10}),a=r.default.extend({cls:"spread-blue",width:10,height:10}),u=r.default.extend({cls:"spread-green",width:10,height:10});t.default={SpreadBlue:a,SpreadGreen:u,SpreadRed:o}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r.default.extend({width:10,height:10,cls:"shrink-green"}),a=r.default.extend({width:10,height:10,cls:"shrink-red"}),u=r.default.extend({width:10,height:10,cls:"shrink-speed"}),d=r.default.extend({width:10,height:10,cls:"shrink-yellow"}),l=r.default.extend({width:10,height:10,cls:"shrink-blue"});t.default={ShrinkBlue:l,ShrinkRed:a,ShrinkSpeed:u,ShrinkYellow:d,ShrinkGreen:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r.default.extend({width:10,height:10,music:"del1"}),a=o.extend({width:10,height:10,cls:"boom-green"}),u=o.extend({width:10,height:10,cls:"boom-red"}),d=o.extend({width:10,height:10,cls:"boom-speed"}),l=o.extend({width:10,height:10,cls:"boom-yellow"}),s=o.extend({width:10,height:10,cls:"boom-blue"});t.default={BoomBlue:s,BoomRed:u,BoomSpeed:d,BoomYellow:l,BoomGreen:a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r.default.extend({cls:"red-shadow",width:8,height:8}),a=r.default.extend({cls:"speed-shadow",width:6,height:6}),u=r.default.extend({cls:"yellow-shadow",width:12,height:12});t.default={ShadowRed:o,ShadowSpeed:a,ShadowYellow:u}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r),a=n(0),u=i(a),d=o.default.extend({constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.centerX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.centerY,n=arguments[2],i=arguments[3];this.base(e,t,i),this.dom.innerHTML=n},width:500,height:200,cls:"interlude"}),l=o.default.extend({width:250,height:150,cls:"interlude2"}),s=o.default.extend({constructor:function(){function e(){new l(n,i,t),++o<4&&setTimeout(e,100)}function t(){++a>=4&&r&&r()}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.default.centerX,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.centerY,r=arguments[2],o=0,a=0;e()}});t.default={Interlude:d,Interlude2:l,Interlude2Comb:s}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(r),a=n(5),u=i(a),d=n(0),l=i(d),s=o.default.extend({constructor:function(){function e(){(0,u.default)("ShrinkGreen",n,i,t),++o<4&&setTimeout(e,100)}function t(){++a>=4&&r&&r()}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.centerX,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.centerY,r=arguments[2],o=0,a=0;e()}}),c=o.default.extend({constructor:function(){function e(){++r>=5&&i&&i()}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.centerX,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.centerY,i=arguments[2],r=0;(0,u.default)("SpreadRed",t,n,e),(0,u.default)("SpreadGreen",t,n,e),(0,u.default)("BoomSpeed",t,n,e),(0,u.default)("BoomYellow",t,n,e),(0,u.default)("BoomBlue",t,n,e)}});t.default={UserBirth:s,SparkExplosion:c}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this.holder,n=t.getCenter(),i=new d.default(n.x,n.y,t.sightAngle).init().birth();s.default.friendList.push(i),e()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),a=i(o),u=n(29),d=i(u),l=n(0),s=i(l);t.default=a.default.extend({constructor:function(e){this.base(e),this.fn=r},nowStep:0,cd:13})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(9);t.default=r.default.extend({length:8,width:8,height:8,birthMusic:"fire1",cls:"san1",angle:0,speed:8,afterUpdatePlugin:[o.Boundary2],update:function(){var e=this;return this.dom.style.cssText="left: "+this.x+"px; top: "+this.y+"px; transform: rotate("+(this.angle+45)+"deg)",this.afterUpdatePlugin.forEach(function(t){return t.call(e)}),this}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];switch(e){case"Red":return new(Function.prototype.bind.apply(o.default,[null].concat(n)));case"Speed":return new(Function.prototype.bind.apply(u.default,[null].concat(n)));case"Yellow":return new(Function.prototype.bind.apply(l.default,[null].concat(n)))}};var r=n(31),o=i(r),a=n(32),u=i(a),d=n(33),l=i(d)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(12),u=i(a),d=n(10),l=i(d);t.default=o.default.extend({speed:1.5,beforeAni:"ShrinkRed",birthAni:"SpreadRed",deathAni:"BoomRed",hp:20,cls:"s-red",skills:[u.default.bind(null,40),l.default.bind(null,"ShadowRed",10,0)]})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(12),u=i(a),d=n(10),l=i(d);t.default=o.default.extend({speed:3.5,length:8,ax:0,ay:0,width:8,height:8,beforeAni:"ShrinkSpeed",deathAni:"BoomSpeed",hp:10,cls:"s-speed",skills:[u.default.bind(null,25),l.default.bind(null,"ShadowSpeed",6,void 0)]})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(r),a=n(10),u=i(a),d=n(9),l=o.default.extend({speed:2,length:12,width:10,height:10,beforeAni:null,deathAni:"BoomYellow",hp:20,cls:"s-yellow",afterUpdatePlugin:[d.Boundary2],skills:[u.default.bind(null,"ShadowYellow",12,void 0)]});t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return function(t,n){t.onDeath=n.bind(null,e)}}function a(e){return function(t,n){function i(){++o==r&&n(e)}var r=t.length,o=0;t.forEach(function(e){return e.onDeath=i})}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.default.random(0,980),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.random(0,580);return function(n,i){"u"===e&&(e=p.default.user.getCenter().x),"u"===t&&(t=p.default.user.getCenter().y);for(var r=[],o=0;o<8;o++){var a=n("Yellow",e,t,45*o);r.push(a)}return(0,f.default)("ShrinkYellow",e,t,function(){r.forEach(function(e){return e.init().birth(function(){return i(e)})})}),r}}function d(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[],r=0;r<t;r++){var o={enemy:e,after:n};"function"==typeof o.enemy&&(o.enemy=o.enemy()),i.push(o)}return i}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),s=i(l),c=n(5),f=i(c),h=n(0),p=i(h),y={k1:[{enemy:"",after:50},{enemy:"Red",after:160},{enemy:"Red",after:200},{enemy:"Red",after:200},{enemy:"Red",after:180},{enemy:"Red",x:200,y:100,after:10},{enemy:"Red",x:200,y:150,after:10},{enemy:"Red",x:200,y:200,after:10},{enemy:"Red",x:200,y:250,after:10},{enemy:"Red",x:200,y:300,after:10},{enemy:"Red",x:200,y:350,after:10},{enemy:"Red",x:200,y:400,after:10},{enemy:"Red",x:200,y:450,after:10},{enemy:"Red",x:200,y:500,after:20},{enemy:"Red",x:800,y:100,after:10},{enemy:"Red",x:800,y:150,after:10},{enemy:"Red",x:800,y:200,after:10},{enemy:"Red",x:800,y:250,after:10},{enemy:"Red",x:800,y:300,after:10},{enemy:"Red",x:800,y:350,after:10},{enemy:"Red",x:800,y:400,after:10},{enemy:"Red",x:800,y:450,after:10},{enemy:"Red",x:800,y:500,after:o(30)},{enemy:"Speed",after:100},{enemy:"Speed",after:100},{enemy:"Speed",after:100},{enemy:"Speed",after:50},{enemy:"Speed",after:50},{enemy:"Speed",after:100},{enemy:"Speed",after:0},{enemy:"Speed",after:0},{enemy:"Speed",after:100},{enemy:"Speed",after:100},{enemy:"Speed",after:o(60)}],k2:[{enemy:"",after:40},{enemy:"Red",x:"u",y:"u",after:0},{enemy:"Red",after:0},{enemy:"Red",after:100}].concat(r(d(u,3,100)),r(d("Speed",10,35)),[{enemy:"",after:50}],r(d(u.bind("u","u"),5,100)),r(d("Red",10,20)),[{enemy:"",after:130}],r(d(u,2)),[{enemy:"",after:40},{enemy:u("u","u"),after:150}],r(d(u,2)),[{enemy:"",after:40},{enemy:u("u","u"),after:150}],r(d(u,2)),[{enemy:"",after:40},{enemy:u("u","u"),after:a}])};t.default=y}]);